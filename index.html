<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repte de Divisibilitat</title>
    <style>
        :root { --primary: #4f46e5; --ultra: #7c3aed; --success: #22c55e; --error: #ef4444; --bg: #f8fafc; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        /* Men√∫ Inicial */
        #menuScreen { text-align: center; padding: 40px 20px; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
        .menu-card { background: #f1f5f9; padding: 20px; border-radius: 15px; border: 2px solid #e2e8f0; }
        .lvl-btn { width: 100%; margin: 5px 0; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; background: white; border: 1px solid #cbd5e1; transition: 0.2s; }
        .lvl-btn:hover { background: var(--primary); color: white; }
        .ultra-btn { background: #1e293b; color: #a78bfa; border: 2px solid #7c3aed; font-size: 1.2rem; padding: 20px; }
        .ultra-btn:hover { background: #7c3aed; color: white; }

        /* HUD */
        .stats-bar { display: none; grid-template-columns: 1fr 1fr 1fr; align-items: center; background: #1e293b; color: white; padding: 15px 25px; border-radius: 12px; margin-bottom: 20px; }
        .timer-bar { width: 100%; height: 8px; background: #475569; border-radius: 4px; margin-top: 5px; overflow: hidden; }
        #timerProgress { width: 100%; height: 100%; background: var(--success); transition: width 0.5s linear; }

        /* Taula */
        #gameArea { display: none; }
        table { width: 100%; border-collapse: separate; border-spacing: 5px; }
        th { background: #f1f5f9; padding: 10px; border-radius: 8px; font-size: 0.8rem; }
        td { background: #fff; border: 1px solid #e2e8f0; border-radius: 8px; text-align: center; height: 55px; font-weight: bold; }
        .check-cell { cursor: pointer; font-size: 1.2rem; color: transparent; }
        .check-cell.correct { background: #dcfce7 !important; color: #166534 !important; }
        .check-cell.wrong { background: #fee2e2 !important; color: #991b1b !important; }

        /* Overlay Resum Final */
        #summaryOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.95); z-index: 100; color: white; justify-content: center; align-items: center; flex-direction: column; text-align: center; }
        .summary-box { background: #1e293b; padding: 40px; border-radius: 20px; border: 3px solid var(--primary); min-width: 300px; }
        .summary-val { font-size: 2.5rem; color: #fbbf24; display: block; margin: 10px 0; }
        .screenshot-note { color: #94a3b8; font-size: 0.9rem; margin-top: 20px; border: 1px dashed #475569; padding: 10px; }

        .explanation { background: #fffbeb; border: 1px solid #fde68a; padding: 15px; border-radius: 10px; margin-bottom: 15px; display: none; font-size: 0.9rem; }
    </style>
</head>
<body>

<div id="summaryOverlay">
    <div class="summary-box">
        <h2 id="summaryTitle">RESUM FINAL</h2>
        <div id="summaryContent">
            Punts: <span class="summary-val" id="finalScore">0</span>
            Nivell: <span id="finalLevel">Mitj√†</span><br>
            Temps restant: <span id="finalTime">0</span>s
        </div>
        <div class="screenshot-note">üì∏ Fes una captura de pantalla d'aquesta targeta per lliurar la teva tasca.</div>
        <button class="lvl-btn" style="margin-top:20px" onclick="location.reload()">Tornar al Men√∫</button>
    </div>
</div>

<div class="container">
    <div id="menuScreen">
        <h1>Laboratori de Divisibilitat</h1>
        <p>Tria el teu repte per comen√ßar</p>
        <div class="menu-grid">
            <div class="menu-card">
                <h3>Mode Normal</h3>
                <p><small>Punts i vides s'arrosseguen</small></p>
                <button class="lvl-btn" onclick="startGame(0)">Comen√ßar Nivell 1 (2, 5, 10)</button>
                <button class="lvl-btn" onclick="startGame(1)">Comen√ßar Nivell 2 (2, 3, 6)</button>
                <button class="lvl-btn" onclick="startGame(2)">Comen√ßar Nivell 3 (3, 4, 12)</button>
            </div>
            <div class="menu-card" style="border-color: var(--ultra); background: #f5f3ff;">
                <h3>Mode Ultra</h3>
                <p><small>Nivell expert: 7, 8, 9 i 11</small></p>
                <button class="lvl-btn ultra-btn" onclick="startGame(3)">ACTIVAR ULTRA</button>
            </div>
        </div>
    </div>

    <div id="gameArea">
        <div class="stats-bar" id="hud">
            <div>Nivell: <span id="lvlDisplay">1</span><br><small>Resten: <span id="remDisplay" style="color:#fbbf24">0</span></small></div>
            <div style="text-align:center">
                <span id="timeDisplay" style="font-family:monospace; font-size:1.4rem">00:45</span>
                <div class="timer-bar"><div id="timerProgress"></div></div>
            </div>
            <div style="text-align:right">Punts: <span id="scoreDisplay">0</span><br><span id="livesDisplay">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span></div>
        </div>

        <div id="explanation" class="explanation"></div>
        <table id="gameTable"><thead id="tHead"></thead><tbody id="tBody"></tbody></table>
    </div>
</div>

<script>
    const rules = {
        2: "Parell.", 3: "Suma de xifres.", 4: "√öltimes 2 xifres.", 5: "Acaba en 0 o 5.",
        6: "Divisible per 2 i 3.", 7: "Algorisme del 7.", 8: "√öltimes 3 xifres.", 
        9: "Suma xifres = 9.", 10: "Acaba en 0.", 11: "Resta parell/imparell.", 12: "Divisible per 3 i 4."
    };

    const config = [
        { name: "Nivell 1", divs: [2, 5, 10], time: 45 },
        { name: "Nivell 2", divs: [2, 3, 6], time: 45 },
        { name: "Nivell 3", divs: [3, 4, 12], time: 45
</html>
